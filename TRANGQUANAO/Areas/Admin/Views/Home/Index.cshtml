@model TRANGQUANAO.ViewModels.AdminDashboardViewModel

@{
    ViewData["Title"] = "Trang quản trị";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml"; // giữ layout admin sẵn có của bạn
}

<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="display-5">Quản trị hệ thống</h1>
            <p class="text-muted">Tổng quan nhanh về dữ liệu cửa hàng</p>
        </div>
    </div>

    <!-- cards -->
    <div class="row g-3">
        <div class="col-md-2 col-sm-6">
            <div class="card shadow-sm border-0">
                <div class="card-body">
                    <h6 class="card-title">Sản phẩm</h6>
                    <h3 class="card-text">@Model.TotalProducts</h3>
                    <a asp-area="Admin" asp-controller="HangHoas" asp-action="Index" class="stretched-link small">Xem chi tiết</a>
                </div>
            </div>
        </div>

        <div class="col-md-2 col-sm-6">
            <div class="card shadow-sm border-0">
                <div class="card-body">
                    <h6 class="card-title">Hóa đơn</h6>
                    <h3 class="card-text">@Model.TotalOrders</h3>
                    <a asp-area="Admin" asp-controller="HoaDons" asp-action="Index" class="stretched-link small">Xem chi tiết</a>
                </div>
            </div>
        </div>

        <div class="col-md-2 col-sm-6">
            <div class="card shadow-sm border-0">
                <div class="card-body">
                    <h6 class="card-title">Khách hàng</h6>
                    <h3 class="card-text">@Model.TotalCustomers</h3>
                    <a asp-area="Admin" asp-controller="KhachHangs" asp-action="Index" class="stretched-link small">Xem chi tiết</a>
                </div>
            </div>
        </div>

        <div class="col-md-2 col-sm-6">
            <div class="card shadow-sm border-0">
                <div class="card-body">
                    <h6 class="card-title">Nhà cung cấp</h6>
                    <h3 class="card-text">@Model.TotalSuppliers</h3>
                    <a asp-area="Admin" asp-controller="NhaCungCaps" asp-action="Index" class="stretched-link small">Xem chi tiết</a>
                </div>
            </div>
        </div>

        <div class="col-md-2 col-sm-6">
            <div class="card shadow-sm border-0">
                <div class="card-body">
                    <h6 class="card-title">Nhân viên</h6>
                    <h3 class="card-text">@Model.TotalEmployees</h3>
                    <a asp-area="Admin" asp-controller="NhanViens" asp-action="Index" class="stretched-link small">Xem chi tiết</a>
                </div>
            </div>
        </div>
    </div>

    <!-- quick actions -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body d-flex gap-2 flex-wrap">
                    <a asp-area="Admin" asp-controller="HangHoas" asp-action="Create" class="btn btn-success">➕ Thêm sản phẩm</a>
                    <a asp-area="Admin" asp-controller="HoaDons" asp-action="Create" class="btn btn-primary">➕ Tạo hóa đơn</a>
                    <a asp-area="Admin" asp-controller="NhaCungCaps" asp-action="Create" class="btn btn-outline-primary">➕ Thêm NCC</a>
                    <a asp-area="Admin" asp-controller="Loais" asp-action="Create" class="btn btn-outline-secondary">➕ Thêm loại</a>
                </div>
            </div>
        </div>
    </div>

    <!-- recent products -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header">
                    <strong>Sản phẩm mới nhất</strong>
                </div>
                <div class="card-body p-0">
                    <table class="table table-striped mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Tên</th>
                                <th>Loại</th>
                                <th>Nhà cung cấp</th>
                                <th>Giá</th>
                                <th>Ngày SX</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model.RecentProducts != null && Model.RecentProducts.Any())
                            {
                                foreach (var p in Model.RecentProducts)
                                {
                                    <tr>
                                        <td>@p.TenHh</td>
                                        <td>@(p.MaLoaiNavigation?.TenLoai ?? "-")</td>
                                        <td>@(p.MaNccNavigation?.TenCongTy ?? "-")</td>
                                        <td>@(p.DonGia.HasValue ? string.Format("{0:N0}", p.DonGia) : "-")</td>
                                        <td>@(p.NgaySx != default ? p.NgaySx.ToString("dd/MM/yyyy") : "-")</td>
                                        <td class="text-end">
                                            <a asp-area="Admin" asp-controller="HangHoas" asp-action="Edit" asp-route-id="@p.MaHh" class="btn btn-sm btn-warning">Sửa</a>
                                            <a asp-area="Admin" asp-controller="HangHoas" asp-action="Details" asp-route-id="@p.MaHh" class="btn btn-sm btn-primary">Xem</a>
                                        </td>
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr><td colspan="6" class="text-center text-muted py-3">Không có sản phẩm</td></tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
